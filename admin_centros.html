<div class="container mt-5">
    <h2 class="text-center">Administraci贸n de Centros de Recolecci贸n</h2>
    <form action="backend/insertar_centro.php" method="POST">
        <div class="form-group">
            <label for="direccion">Direcci贸n:</label>
            <input type="text" id="direccion" name="direccion" class="form-control" required>
        </div>
        <div class="form-group">
            <label for="provincia">Provincia:</label>
            <input type="text" id="provincia" name="provincia" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary">Agregar Centro</button>
    </form>

    <h3 class="mt-5">Centros Existentes</h3>
    <div id="centros-admin-list"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        fetch('backend/get_centros.php')
            .then(response => response.json())
            .then(data => {
                let centrosAdminList = document.getElementById('centros-admin-list');
                data.forEach(centro => {
                    let div = document.createElement('div');
                    div.innerHTML = `
                        <p>${centro.Direccion} (${centro.Provincia}) 
                        <button onclick="editarCentro(${centro.idCentro})">Editar</button>
                        <button onclick="eliminarCentro(${centro.idCentro})">Eliminar</button></p>
                    `;
                    centrosAdminList.appendChild(div);
                });
            })
            .catch(error => console.log('Error:', error));
    });

    function editarCentro(idCentro) {
        // L贸gica para editar el centro
    }

    function eliminarCentro(idCentro) {
        fetch('backend/eliminar_centro.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ idCentro: idCentro })
        }).then(response => response.text())
          .then(data => alert(data));
    }
</script>
